# 🌱 용인시 스마트팜 지원 챗봇

이 프로젝트는 **2024 한국외대 SW중심대학 × 용인시 해커톤**에서 개발된 챗봇으로,
스마트팜 창업자 및 용인시 농업 지원 정보를 **PDF 기반으로 자동 검색·요약**해 제공합니다.

질문과 PDF 페이지 간 **TF-IDF 유사도 분석**을 활용하여 가장 관련성이 높은 정보를 찾아내고,
GPT 모델을 통해 자연스러운 답변을 생성합니다.

---

## 🚀 주요 기능

### 🔍 PDF 기반 정보 검색

* PyMuPDF(fitz)를 사용해 PDF 문서를 **페이지 단위로 텍스트 추출**
* 사용자의 질문과 각 페이지 텍스트를 비교하여
  **TF-IDF + Cosine Similarity** 기반으로 가장 연관성 높은 페이지 선택

### 🏛 용인시 키워드 기반 문서 자동 선택

* 질문에 `"용인"` 키워드가 포함되면 **용인시 관련 PDF만 검색**
* 그 외에는 **스마트팜 가이드 PDF**에서 검색

### 🤖 GPT 모델 응답 생성

* 선택된 페이지 내용을 GPT-4o mini에 전달하여
  문서 기반의 정확한 응답 생성
* Streamlit 채팅 UI에서 타이핑 효과로 자연스럽게 출력

### 💬 대화 히스토리 유지

* Streamlit `session_state`를 활용하여
  사용자-챗봇 간 대화 맥락을 유지

---

## 🧩 기술 스택

### 🖥 Frontend / UI

* **Streamlit**
* 채팅형 인터페이스 및 사용자·AI 대화 표시

### 📚 Document Processing

* **PyMuPDF**: PDF 페이지 텍스트 추출
* **TF-IDF (TfidfVectorizer)**: 질문과 문서의 유사도 분석
* **Cosine Similarity**: 가장 관련성 높은 페이지 선택

### 🤖 AI Model

* **GPT-4o mini (OpenAI / LangChain ChatOpenAI)**
* 문서 콘텐츠 + 사용자 질문 기반 응답 생성

### ⚡ Optimization

* PDF 텍스트는 앱 실행 시 **미리 읽어서 캐싱**,
  질문마다 PDF 재로드 없이 빠른 처리

### 📦 참고: LangChain

* LangChain의 일부 컴포넌트(ChatOpenAI 등)를 사용하나,
  **검색·QA 체인은 직접 구현한 TF-IDF 기반 로직으로 처리**
* 복잡한 RAG 체인 없이 단순·명확한 구조

---


## 📝 주요 처리 흐름

1. PDF 파일 로드 → 페이지 단위 텍스트 추출
2. 사용자 질문 입력
3. 질문과 각 페이지의 TF-IDF 벡터 구축
4. Cosine Similarity로 가장 연관성 높은 페이지 선택
5. 선택된 페이지의 내용을 포함해 GPT 모델 호출
6. 자연스러운 대화 형태로 응답 출력

---

